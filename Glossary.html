<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Glossary for IT</title>
	<link rel="icon" type="image/x-icon" href="ico/favicon.ico">
	<link rel="stylesheet" href="css/common.css">
	<script src="js/reference.js"></script>
	<script src="js/glossary.js"></script>
	<style>
		th {color: DarkSlateGrey; letter-spacing: 0.0625em;}
		summary {color: DarkSlateGrey;}

		:target {background-color: LightGreen;}

		.svg-logo {
			vertical-align: middle;
			height: 15px;
		}
		.svg-logo:hover {
			height: 100px;
		}
	</style>
</head>
<body>
<a href="all.html" id="sitemap">SiteMap</a>
<div class="indent"></div>

<label for="search-input"></label>
<input id="search-input" type="text" title="Enter abbreviation or term" autofocus>
<button name="Search" onclick="search()">Search</button>
<div class="indent"></div>
<div id="search-results" class="display-none"></div>
<div class="indent"></div>
<hr>

<div id="topics" class="display-none">
	<input id ="select-all" type="radio" name="topics" checked>
	<label for="select-all">Select All</label>
	<input id="select-none" type="radio" name="topics">
	<label for="select-none">Select None</label>
	<div class="indent4"></div>
</div>
<hr>

<details open>
	<summary><b>A</b></summary>
	<table id="A" class="collapse-border padding sorted">
		<tr>
			<th class="skip black">Abbreviation</th>
			<th class="skip black">Transcript</th>
			<th class="skip black">Groups</th>
			<th class="skip black">Notes</th>
			<th class="skip black">Icon</th>
		</tr>
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>B</b></summary>
	<table id="B" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>C</b></summary>
	<table id="C" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>D</b></summary>
	<table id="D" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>E</b></summary>
	<table id="E" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>F</b></summary>
	<table id="F" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>G</b></summary>
	<table id="G" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>H</b></summary>
	<table id="H" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>I</b></summary>
	<table id="I" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>J</b></summary>
	<table id="J" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>K</b></summary>
	<table id="K" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>L</b></summary>
	<table id="L" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>M</b></summary>
	<table id="M" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>N</b></summary>
	<table id="N" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>O</b></summary>
	<table id="O" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>P</b></summary>
	<table id="P" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>Q</b></summary>
	<table id="Q" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>R</b></summary>
	<table id="R" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>S</b></summary>
	<table id="S" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>T</b></summary>
	<table id="T" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>U</b></summary>
	<table id="U" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>V</b></summary>
	<table id="V" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>W</b></summary>
	<table id="W" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>X</b></summary>
	<table id="X" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>Y</b></summary>
	<table id="Y" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<details open>
	<summary><b>Z</b></summary>
	<table id="Z" class="collapse-border padding sorted">
	</table>
</details>
<div class="indent"></div>

<hr>

<table id="groupsTable" class="collapse-border padding sorted"></table>
<div class="indent"></div>

<a href="all.html" id="sitemap-footer">SiteMap</a><br>
<iframe class="footer" src="./footer.html"></iframe>

<script>
	const groupsTable = document.getElementById("groupsTable"); // Groups

	// Fetch data from glossaryGroupMap
	if (typeof glossaryGroupMap !== 'undefined') {
		glossaryGroupMap.forEach((value, key, map) => {
			const newRow = groupsTable.insertRow(-1);
			const th = document.createElement('th');
			th.classList.add("skip");
			th.appendChild(document.createTextNode(key));
			newRow.appendChild(th);

			const groupCell = newRow.insertCell(-1);
			groupCell.id = key;
			addTextWithLinks(value.text, groupCell);
		});
	}

	// Fetch data from rawMap
	if (typeof rawMap !== 'undefined') parseMap(rawMap, groupsTable);

	// fill the tables headers
	const ths = document.getElementsByTagName("th");
	Array.from(ths).forEach( th => {
		if (th.classList.contains('skip') || th.innerHTML) return;
		th.innerHTML = th.id;
	});

	// fill the <a> tags
	const hrefs = document.getElementsByTagName("a");
	Array.from(hrefs).forEach( link => {
		if (link.id) return;
		if (!link.innerHTML) link.innerHTML = link.href.split("#")[1];
	});

	function sortTable(table) {
		let switching = true;
		const rows = table.rows;

		while (switching) {
			switching = false;

			for (let i = 0; i < (rows.length - 1); i++) {
				const x = rows[i].getElementsByTagName("TH")[0];
				const y = rows[i + 1].getElementsByTagName("TH")[0];

				if (x && y && (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase())) {
					rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
					switching = true;
					break;
				}
			}
		}
	}

	const tables = document.querySelectorAll("table.sorted");
	tables.forEach(sortTable);

	// rowSpan the same
	tables.forEach(table => {
		const rows = table.rows;
		if (rows.length === 0) return;

		let upRowTd = rows[0].getElementsByTagName("TD")[1];
		let index = 1;
		while (index < rows.length) {
			let downRowTd = rows[index].getElementsByTagName("TD")[1];

			if (upRowTd && downRowTd && upRowTd.innerHTML === downRowTd.innerHTML) {
				upRowTd.rowSpan = upRowTd.rowSpan + 1;
				downRowTd.remove();
			} else {
				upRowTd = downRowTd;
			}
			index++;
		}
	});

	const searchInput = document.getElementById("search-input");
	const searchResults = document.getElementById("search-results");

	function search() {
		if (searchInput.value && searchInput.value.trim().length > 0) {
			const searchStr = searchInput.value.trim().toLowerCase();
			searchResults.innerHTML = "";

			Array.from(ths).forEach( item => {
				if (item.innerHTML.toLowerCase().indexOf(searchStr) >= 0 && item.id) {
					searchResults.appendChild(createHrefLink(item.id, item.innerHTML));
					searchResults.appendChild(document.createTextNode(" "));
				}
			});
			if (searchResults.innerHTML.length == 0) {
				searchResults.appendChild(document.createTextNode("Nothing found"));
				const c = function() {return Math.floor((Math.random() * 255))};
				searchResults.style.color = "rgb(" + c() + "," + c() + "," + c() +")";
			}
			searchResults.style.display = "block";
		} else {
			searchResults.style.display = "none";
		}
	}

	searchInput.addEventListener("keypress", function(event) {
		if (event.key === "Enter") {
			event.preventDefault();
			search();
		}
	});
</script>
</body>
</html>
